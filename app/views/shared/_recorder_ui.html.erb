<%# このパーシャルは、録音UIのHTML構造のみを担う %>
<%# data-* 属性やコントローラーは呼び出し元で定義 %>

<%# --- 録音UI（録音中に表示される部分）--- %>
<div data-web-audio-recorder-target="recorder">
  <div class="text-center">
    <div class="flex items-center justify-center mb-2">
    <%# --- 画面中央のマイクアイコン --- %>
      <button data-action="click->web-audio-recorder#startRecording"
              class="w-40 h-40 rounded-full bg-white shadow-lg flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500">
        <span data-web-audio-recorder-target="recordIndicatorIcon">
          <%= inline_svg_tag 'mic.svg',
                class: 'h-16 w-16 text-purple-600',
                data: { web_audio_recorder_target: "micIcon" } %>
        </span>
      </button>
    </div>

    <p data-web-audio-recorder-target="recordIndicatorText" class="text-gray-600 text-lg mb-6">タップして録音開始</p>

    <div class="h-14"> <%# ボタンの高さ分のスペーサー %>
      <button data-action="click->web-audio-recorder#startRecording" data-web-audio-recorder-target="startButton" class="w-full px-6 py-4 text-base font-semibold text-white bg-purple-600 rounded-lg shadow-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition">
        <span class="inline-flex items-center justify-center">
          <%= inline_svg_tag 'mic.svg', class: 'h-6 w-6 mr-2', 'aria-hidden': 'true' %>
          録音を開始する
        </span>
      </button>
      <button data-action="click->web-audio-recorder#stopRecording" data-web-audio-recorder-target="stopButton" class="hidden w-full px-6 py-4 text-base font-semibold text-white bg-red-500 rounded-lg shadow-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition">
        <span class="inline-flex items-center justify-center">
          <svg class="h-6 w-6 mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path fill-rule="evenodd" d="M4.5 7.5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3-3h-9a3 3 0 01-3-3v-9z" clip-rule="evenodd" /></svg>
          録音を停止する
        </span>
      </button>
    </div>
  </div>
  <p class="text-center text-gray-500 text-sm mt-4">
    静かな環境で、マイクに向かってはっきりと発音してください
  </p>
</div>

<%# --- 録音後確認UI（録音後に表示される部分）--- %>
<div data-web-audio-recorder-target="result" class="hidden">
  <%# この中身は、Stimulusコントローラーがサーバーからのレスポンスで動的に挿入します %>
</div>

<%# --- 進行ボタン（次へ/終了） --- %>
<div class="mt-6 space-y-3">
  <%# 次へ進むボタン (1〜4問目) %>
  <a href="#" data-web-audio-recorder-target="nextButton" class="hidden block w-full text-center px-6 py-4 text-base font-semibold text-white bg-purple-600 rounded-lg shadow-md hover:bg-purple-700 transition">
    次へ進む
  </a>
  <%# 結果をみるボタン (5問目) %>
  <a href="#" data-web-audio-recorder-target="finishButton" class="hidden block w-full text-center px-6 py-4 text-base font-semibold text-white bg-purple-600 rounded-lg shadow-md hover:bg-purple-700 transition">
    結果をみる
  </a>
</div>