<%# ヘッダーに表示する動的なタイトルを設定 %>
<% content_for :header_title, "声のコンディション確認" %>

<%# --- メインコンテンツ --- %>
<%# data-controller と data-***-value を追加 %>
<div class="container mx-auto px-4 py-4 max-w-sm"
     data-controller="web-audio-recorder"
     data-web-audio-recorder-post-url-value="<%= voice_condition_logs_path %>"
     data-web-audio-recorder-form-field-name-value="voice_condition_log[recorded_audio]"
     data-web-audio-recorder-send-phrase-snapshot-value="true">

  <%# --- お題カード --- %>
  <div class="bg-white rounded-2xl shadow p-6 mb-8 text-center">
    <h2 class="text-sm text-gray-500 mb-2">今日のお題</h2>
    <%# JavaScriptがお題テキストを取得するために、このidは重要です %>
    <p id="current-phrase" class="text-2xl font-bold text-gray-800 mb-4"><%= @fixed_phrase %></p>
    <p class="text-xs text-gray-400">最大5秒の録音です</p>
  </div>

  <%# --- 録音機能セクション (共通パーシャルを呼び出す) --- %>
  <%# localsでのデータ渡しが不要になり、シンプルに %>
  <%= render 'shared/recorder_ui' %>

</div>